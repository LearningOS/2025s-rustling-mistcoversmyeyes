### ğŸ¤– Assistant

### Rust String å®Œå…¨æ‰‹å†Œï¼ˆæ–‡å­—ç‰ˆï¼‰

---

#### ä¸€ã€åŸºç¡€æ¦‚å¿µ
```rust
// String æ˜¯ UTF-8 ç¼–ç çš„å¯å˜å­—ç¬¦ä¸²
let mut s = String::new();       // ç©ºå­—ç¬¦ä¸²
s.push_str("hello");            // è¿½åŠ å†…å®¹
let s = "world".to_string();    // å­—é¢é‡è½¬æ¢
```

#### äºŒã€æ ¸å¿ƒæ“ä½œåˆ†ç±»

##### 1. åˆ›å»ºä¸åˆå§‹åŒ–
| æ–¹æ³•                 | ä½œç”¨                          | ç¤ºä¾‹                        | å†…å­˜å½±å“      |
|----------------------|-------------------------------|----------------------------|--------------|
| `new()`              | åˆ›å»ºç©ºString                  | `String::new()`            | åˆå§‹å®¹é‡0     |
| `with_capacity(n)`   | é¢„åˆ†é…å­—èŠ‚å®¹é‡                | `String::with_capacity(10)`| å‡å°‘é‡åˆ†é…    |
| `to_string()`        | &strè½¬String                  | `"hi".to_string()`         | å †åˆ†é…        |

##### 2. å†…å®¹ä¿®æ”¹
| æ–¹æ³•                 | ä½œç”¨                          | æ—¶é—´å¤æ‚åº¦  |
|----------------------|-------------------------------|------------|
| `push_str(&str)`     | è¿½åŠ å­—ç¬¦ä¸²                    | O(n)       |
| `push(char)`         | è¿½åŠ å­—ç¬¦                      | O(1) åˆ†æ‘Š  |
| `insert(idx, char)`  | æ’å…¥å­—ç¬¦                      | O(n)       |
| `replace(range, &str)` | æ›¿æ¢æŒ‡å®šèŒƒå›´å†…å®¹             | O(n)       |

##### 3. å†…å®¹è®¿é—®
| æ–¹æ³•                 | è¿”å›ç±»å‹          | è¶Šç•Œå¤„ç†          |
|----------------------|-------------------|-------------------|
| `len()`              | usize             | UTF-8å­—èŠ‚æ•°       |
| `chars()`            | å­—ç¬¦è¿­ä»£å™¨        | Unicodeæ ‡é‡å€¼     |
| `as_bytes()`         | &[u8]             | åŸå§‹å­—èŠ‚è®¿é—®      |
| `get(..n)`           | Option<&str>      | å®‰å…¨å­ä¸²è®¿é—®      |

##### 4. å†…å­˜ç®¡ç†
```rust
s.reserve(20);          // ç¡®ä¿è‡³å°‘20å­—èŠ‚å®¹é‡
s.shrink_to_fit();      // é‡Šæ”¾å¤šä½™å®¹é‡
s.truncate(3);          // æˆªæ–­åˆ°å‰3ä¸ªå­—èŠ‚
```

---

#### ä¸‰ã€ç‰¹æ®Šç”¨ä¾‹æ¨¡å¼

##### 1. å­—ç¬¦ä¸²æ‹¼æ¥
```rust
// é«˜æ•ˆæ‹¼æ¥ï¼ˆé¿å…ä¸´æ—¶åˆ†é…ï¼‰
let mut s = String::with_capacity(20);
s.push_str("Hello");
s += " world!";         // ç­‰æ•ˆäº push_str
```

##### 2. ç±»å‹è½¬æ¢
```rust
// String â†’ &strï¼ˆé›¶æˆæœ¬ï¼‰
let slice: &str = &s;

// ä¸å…¶ä»–ç±»å‹äº’è½¬
let path = Path::new(&s);          // è½¬è·¯å¾„
let c_str = CString::new(s).unwrap(); // è½¬Cå­—ç¬¦ä¸²
```

##### 3. UTF-8å¤„ç†
```rust
// éå†Unicodeå­—ç¬¦
for c in "à¤¨à¤®à¤¸à¥à¤¤à¥‡".chars() {
    println!("{}", c);  // à¤¨, à¤®, à¤¸, à¥, à¤¤, à¥‡
}

// ç»Ÿè®¡å­—ç´ ç°‡ï¼ˆéœ€è¦ç¬¬ä¸‰æ–¹åº“ï¼‰
use unicode_segmentation::UnicodeSegmentation;
let count = "à¤¨à¤®à¤¸à¥à¤¤à¥‡".graphemes(true).count(); // 4
```

---

#### å››ã€æ€§èƒ½ç‰¹æ€§

##### å†…å­˜åˆ†é…ç­–ç•¥
- é»˜è®¤åˆå§‹å®¹é‡ï¼š0å­—èŠ‚
- å¢é•¿ç­–ç•¥ï¼šé€šå¸¸ç¿»å€æ‰©å®¹
- å®¹é‡å•ä½ï¼šå­—èŠ‚ï¼ˆéå­—ç¬¦æ•°ï¼‰

##### æ“ä½œå¤æ‚åº¦
| æ“ä½œ               | å¹³å‡å¤æ‚åº¦ | æœ€åå¤æ‚åº¦ |
|--------------------|------------|------------|
| push/pop           | O(1)*      | O(n)       |
| ç´¢å¼•è®¿é—®           | O(1)       | O(1)       |
| å­—ç¬¦ä¸²æ‹¼æ¥         | O(n)       | O(n)       |

*åˆ†æ‘Šæ—¶é—´å¤æ‚åº¦

---

#### äº”ã€æ‰€æœ‰æƒä¸å€Ÿç”¨

##### 1. ç§»åŠ¨è¯­ä¹‰
```rust
let s1 = String::from("hello");
let s2 = s1;            // æ‰€æœ‰æƒè½¬ç§»
// println!("{}", s1);  // ç¼–è¯‘é”™è¯¯
```

##### 2. å€Ÿç”¨è§„åˆ™
```rust
let mut s = String::from("hello");
let slice = &s[0..2];   // ä¸å¯å˜å€Ÿç”¨
// s.push_str("world"); // ç¼–è¯‘é”™è¯¯ï¼å­˜åœ¨æ´»è·ƒå€Ÿç”¨
```

---

### Rust String å®Œå…¨æ‰‹å†Œï¼ˆå›¾ç¤ºç‰ˆï¼‰

---

#### ä¸€ã€å†…å­˜å¸ƒå±€
```text
æ ˆå†…å­˜ï¼š
+---------+---------+---------+
| pointer | capacity | length  |
| 0x5678  |    10    |    5    |  â†’ "hello"
+---------+---------+---------+

å †å†…å­˜ï¼ˆ0x5678ï¼‰ï¼š
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
|  h  |  e  |  l  |  l  |  o  |  \0 | ??? | ??? | ??? | ??? |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
         å·²ä½¿ç”¨å­—èŠ‚             å®¹é‡å‰©ä½™
```

#### äºŒã€æ‹¼æ¥æ“ä½œ
```text
åˆå§‹ï¼šs = "tea"
æ“ä½œï¼šs.push_str("cher")

å†…å­˜å˜åŒ–ï¼š
+---+---+---+---+---+---+---+---+---+---+---+---+---+
| t | e | a | c | h | e | r |   |   |   |   |   |   |
+---+---+---+---+---+---+---+---+---+---+---+---+---+
```

#### ä¸‰ã€åˆ‡ç‰‡æ“ä½œ
```text
åŸå§‹å­—ç¬¦ä¸²ï¼š "ğŸ¦€Rustâš™ï¸"
å­—èŠ‚ç´¢å¼•ï¼š 0-3 4-7 8-11 12-16
           ğŸ¦€   R   u    stâš™ï¸

å®‰å…¨åˆ‡ç‰‡ &s[0..4] â†’ "ğŸ¦€"
å±é™©åˆ‡ç‰‡ &s[0..1] â†’ panicï¼ˆæ— æ•ˆUTF-8ï¼‰
```

#### å››ã€æ‰€æœ‰æƒè½¬ç§»
```text
s1: [ptr: 0x1234, cap: 5, len:5] â†’ "hello"
s2 = s1 è½¬ç§»åï¼š
s1: [ptr: null, cap:0, len:0]
s2: [ptr: 0x1234, cap:5, len:5]
```

#### äº”ã€å®¹é‡å¢é•¿
```text
åˆå§‹ï¼šcap=3, len=3 â†’ "abc"
push('d')è§¦å‘æ‰©å®¹ï¼š
æ–°å®¹é‡=6ï¼Œå¤åˆ¶å†…å®¹ï¼š
+---+---+---+---+---+---+
| a | b | c | d |   |   |
+---+---+---+---+---+---+
```

---

å®˜æ–¹å‚è€ƒï¼š
- [std::string::String](https://doc.rust-lang.org/std/string/struct.String.html)
- [Rust UTF-8 å¤„ç†æŒ‡å—](https://doc.rust-lang.org/rust-by-example/std/str.html)

ï¼ˆè¿­ä»£å™¨ç›¸å…³æ–¹æ³•å¦‚ `chars()`, `split()` ç­‰è¯¦è§è¿­ä»£å™¨æ‰‹å†Œï¼‰